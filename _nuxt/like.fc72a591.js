import{_ as E}from"./week3.70dc6bd0.js";import{_ as I}from"./SideBar.85ea5694.js";import{_ as N}from"./Card.2e12866b.js";import{u as A}from"./cookie.68603f12.js";import{k as P,p as B}from"./users.810791e2.js";import{b as J,c as O,d as j,e as L}from"./works.8b9c14c6.js";import{l as v}from"./loading.acca26de.js";import{e as M,r as u,a as D,f as b,C as F,g as d,i as f,j as i,k,u as a,F as G,x as T,s as H}from"./entry.950a9e27.js";import"./useUploadImg.7d2a983e.js";import"./fetch.6d0ababc.js";import"./team.297d1263.js";import"./useCustomFetch.e7fcaaf5.js";const R={class:"main-bg"},X={class:"container py-5"},Y={class:"row justify-content-center mt-md-7"},$={class:"col-md-8"},q={class:"bg-white-40 p-7 rounded-4 text-white"},z=i("h2",{class:"fs-2 fw-900 mb-5"}," 喜歡的投稿 ",-1),K={class:"row"},Q={class:"d-flex justify-content-center"},Z={key:1},ge=M({__name:"like",async setup(ee){let p,_;const w=u({avatar:null,description:null,email:"",facebook_url:null,medal_image_url:null,medal_name:null,nickname:"",user_id:""}),x=u({content:"",style:"",icon:""}),h=v(async()=>{try{const{data:t,error:e}=await P();if(e.value)throw e.value=null,new Error("取得使用者資料失敗。");w.value=t.value.user_info}catch{}}),V=t=>{x.value=t},n=u({works_list:[],pagination:{total_works:13,count:18,total_page:1,current_page:1}}),c=v(async t=>{try{const{data:e,error:o}=await B(t);if(o.value)throw o.value=null,new Error("取得喜歡的投稿列表失敗。");e.value.pagination.current_page>e.value.pagination.total_page?await c(e.value.pagination.total_page):n.value=e.value}catch{}}),C=v(async(t,e)=>{let o=!1;if(e){const{error:s}=await J(t);s.value&&(s.value=null,o=!0)}else{const{error:s}=await O(t);s.value&&(s.value=null,o=!0)}if(o)throw new Error("更新作品按讚失敗。");await c(n.value.pagination.current_page)}),W=v(async(t,e)=>{var m,g,l,S;let o=!1,s="採用功能尚未開放。";if(e){const{error:r}=await j(t);r.value&&(s=JSON.parse(JSON.stringify((g=(m=r.value)==null?void 0:m.data)==null?void 0:g.message)),r.value=null,o=!0)}else{const{error:r}=await L(t);r.value&&(s=JSON.parse(JSON.stringify((S=(l=r.value)==null?void 0:l.data)==null?void 0:S.message)),r.value=null,o=!0)}if(o)throw new Error(s);await c(n.value.pagination.current_page)}),y=u(!1);D(()=>{A("t_sInR5cCI6IkpXVCJ_token").value&&(y.value=!0)});const U=u(1);return(()=>{sessionStorage.getItem("HbPeShUserVmYTyPe")==="個人組/前端工程師"&&(U.value=2)})(),[p,_]=b(()=>h()),await p,_(),[p,_]=b(()=>c()),await p,_(),(t,e)=>{const o=E,s=I,m=N,g=F("VueAwesomePaginate");return d(),f("div",R,[i("div",X,[k(o),i("div",Y,[k(s,{info:a(w),onEdit:a(h),onAlert:V},null,8,["info","onEdit"]),i("div",$,[i("div",q,[a(n).pagination.total_works?(d(),f(G,{key:0},[z,i("div",K,[a(n).works_list.length?(d(),T(m,{key:0,"user-type":a(U),"works-list":a(n).works_list,"col-num":6,"auth-status":a(y),onIsUpvotes:a(C),onIsUse:a(W)},null,8,["user-type","works-list","auth-status","onIsUpvotes","onIsUse"])):H("",!0)]),i("div",Q,[k(g,{modelValue:a(n).pagination.current_page,"onUpdate:modelValue":e[0]||(e[0]=l=>a(n).pagination.current_page=l),"total-items":a(n).pagination.total_works,"items-per-page":a(n).pagination.count,"on-click":l=>a(c)(l),"pagination-container-class":"pagination","prev-button-content":"«","next-button-content":"»","paginate-buttons-class":"page-link","active-page-class":"active"},null,8,["modelValue","total-items","items-per-page","on-click"])])],64)):(d(),f("p",Z,"目前沒有喜歡的投稿"))])])])])])}}});export{ge as default};

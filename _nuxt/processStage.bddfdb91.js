import{e as R,P as T,d as $,g as l,i as a,j as e,F as d,u as n,m as b,K as C,L as D,t as I,H as U,v as h,r as N,a as E,s as S,k as F,l as L,_ as M}from"./entry.950a9e27.js";import{i as v,c as x,s as j,b as W,d as J}from"./useUploadImg.7d2a983e.js";import{d as V}from"./defaultWeekImg.22b09154.js";import{l as O}from"./users.810791e2.js";const G={class:"mb-4"},H=["src"],K=["src"],P=["src"],q={class:"mb-4 text-white"},z=e("label",{for:"formFile",class:"form-label"}," 上傳設計稿圖片* ",-1),A=e("p",null,[e("small",{class:"text-danger"}," 至多三張，且需符合固定尺寸：寬 1200px、高 628px，限制大小 3MB ")],-1),Q=["id","onUpdate:modelValue","onClick"],X=["for"],Y=["src","alt"],Z={class:"px-2 py-4 d-flex justify-content-between w-100 text-truncate"},ee={class:"mb-0 text-truncate"},te=["onClick"],se=e("i",{class:"far fa-times-circle text-white"},null,-1),le=[se],ae=e("small",{class:"text-white"},"將此張圖片設定為封面",-1),oe={class:"mb-3"},ie=e("label",{for:"upload",class:"custom-file-upload"},[e("i",{class:"fas fa-plus-circle text-info d-block"}),h(" 新增圖片 ")],-1),ne=["id","onUpdate:modelValue","onClick"],ce=["for"],re=["src","alt"],de={class:"px-2 py-4 d-flex justify-content-between w-100 text-truncate"},ue={class:"mb-0 text-truncate"},_e=["onClick"],me=e("i",{class:"far fa-times-circle text-white"},null,-1),fe=e("small",{class:"text-white"},"將此張圖片設定為封面",-1),pe={class:"mb-3"},he=e("label",{for:"upload",class:"custom-file-upload"},[e("i",{class:"fas fa-plus-circle text-info d-block"}),h(" 新增圖片 ")],-1),B=R({__name:"UI.client",props:{worksId:{},stageId:{},images:{},editStatus:{type:Boolean}},emits:["getData"],setup(g,{emit:w}){const o=g,p=w,{stageId:_}=T(o),u=$(()=>{let t=0;return _.value!==""&&typeof _.value=="number"&&(t=_.value),V(t)}),m=$(()=>{var t,c;return o.editStatus?(t=o.images.find(s=>s.is_cover))==null?void 0:t.image_url:(c=v.value.find(s=>s.is_cover))==null?void 0:c.image}),i=t=>{v.value.forEach((c,s)=>{s===t?c.is_cover=!0:c.is_cover=!1})},k=async t=>{await x(t),await W(o.worksId,v.value),p("getData",o.worksId)},y=async t=>{await J(o.worksId,t),p("getData",o.worksId)};return(t,c)=>(l(),a(d,null,[e("div",G,[t.editStatus?(l(),a("img",{key:1,src:n(m),alt:"設計稿圖片3",class:"img-fluid"},null,8,P)):(l(),a(d,{key:0},[n(v).length?(l(),a("img",{key:0,src:`data:image/png;base64,${n(m)}`,class:"img-fluid",alt:"設計稿圖片1"},null,8,H)):(l(),a("img",{key:1,src:n(u).imgUrl,alt:"設計稿圖片2",class:"img-fluid"},null,8,K))],64))]),e("div",q,[z,A,t.editStatus?(l(),a(d,{key:1},[(l(!0),a(d,null,b(t.images,(s,r)=>(l(),a("div",{key:r,class:"form-check mb-3"},[C(e("input",{id:`flexRadioDefault${r}`,"onUpdate:modelValue":f=>s.is_cover=f,class:"form-check-input",type:"radio",name:"flexRadioDefault",value:!0,onClick:f=>n(j)(t.worksId,s.id)},null,8,ne),[[D,s.is_cover]]),e("label",{class:"form-check-label border d-flex align-items-center",for:`flexRadioDefault${r}`},[e("img",{src:s.image_url,alt:s.id,class:"img-fluid",width:"118"},null,8,re),e("div",de,[e("p",ue,I(`設計稿圖片 ${r+1}`),1),e("a",{href:"#",class:"link-light text-decoration-none",onClick:U(f=>y(s.id),["prevent"])},[h(" 刪除 "),me],8,_e)])],8,ce),fe]))),128)),e("div",pe,[he,e("input",{id:"upload",type:"file",class:"input",onChange:k},null,32)])],64)):(l(),a(d,{key:0},[(l(!0),a(d,null,b(n(v),(s,r)=>(l(),a("div",{key:r,class:"form-check mb-3"},[C(e("input",{id:`flexRadioDefault${r}`,"onUpdate:modelValue":f=>s.is_cover=f,class:"form-check-input",type:"radio",name:"flexRadioDefault",value:!0,onClick:f=>i(r)},null,8,Q),[[D,s.is_cover]]),e("label",{class:"form-check-label border border-1 border-white d-flex align-items-center",for:`flexRadioDefault${r}`},[e("img",{src:`data:image/png;base64,${s.image}`,alt:s.name,class:"img-fluid",width:"118"},null,8,Y),e("div",Z,[e("p",ee,I(s.name),1),e("a",{href:"#",class:"link-muted",onClick:U(f=>n(v).splice(r,1),["prevent"])},le,8,te)])],8,X),ae]))),128)),e("div",oe,[ie,e("input",{id:"upload",type:"file",class:"input",onChange:c[0]||(c[0]=(...s)=>n(x)&&n(x)(...s))},null,32)])],64))])],64))}});const ge={key:0},ve=["src"],ke=e("p",{class:"mb-1"}," 採用設計稿 ",-1),we=e("small",{class:"text-danger"},"投稿後無法更換採用的設計稿",-1),$e={key:0,class:"text-white"},be={class:"mb-4"},ye=["src","alt"],xe=e("p",null,[h("設計稿狀態"),e("small",{class:"text-danger"})],-1),Ie=e("p",{class:"text-muted"}," 未採用設計稿 ",-1),Ce=e("p",null,[e("small",{class:"text-danger"},[e("i",{class:"fas fa-exclamation-triangle"}),h(" 若有採用 UI 介面，請記得點擊採用，您的採用會是 UI 設計師的最大鼓勵！")])],-1),De=R({__name:"Frontend.client",props:{worksId:{},images:{},stageId:{},editStatus:{type:Boolean}},emits:["get-data"],setup(g){const w=g,{stageId:o}=T(w),p=$(()=>{let i=0;return o.value!==""&&typeof o.value=="number"&&(i=o.value),V(i)}),_=N([]),u=async()=>{try{const{data:i,error:k}=await O();if(k.value)throw k.value=null,new Error("取得使用者資料失敗。");_.value=i.value.works_list}catch{}},m=$(()=>_.value.filter(i=>i.stage_id===o.value));return E(()=>{u()}),(i,k)=>{const y=M;return l(),a(d,null,[(l(!0),a(d,null,b(n(m),t=>(l(),a("div",{key:t.id,class:"text-white"},[e("div",null,[(l(!0),a(d,null,b(t.images,c=>(l(),a("div",{key:c.id,class:"mb-4"},[c.is_cover?(l(),a("div",ge,[e("img",{src:c.image_url,alt:"",class:"img-fluid"},null,8,ve)])):S("",!0)]))),128)),ke,e("p",null,[h(" 已採用 "),F(y,{to:`/users/${t.user_id}`,target:"_blank",class:"link-dark"},{default:L(()=>[h(I(t.nickname)+" 的設計稿 ",1)]),_:2},1032,["to"])]),we])]))),128)),n(m).length?S("",!0):(l(),a("div",$e,[e("div",be,[e("img",{src:n(p).imgUrl,alt:n(p).name,class:"img-fluid"},null,8,ye)]),xe,Ie,Ce]))],64)}}}),Ue={class:"mb-4"},Se=["src"],Re=["src"],Te=["src"],Ve={class:"mb-4 text-white"},Be=e("label",{for:"formFile",class:"form-label"}," 上傳設計稿圖片* ",-1),Ne=e("p",null,[e("small",{class:"text-danger"}," 至多三張，且需符合固定尺寸：寬 1200px、高 628px，限制大小 3MB ")],-1),Ee=["id","onUpdate:modelValue","onClick"],Fe=["for"],Le=["src","alt"],Me={class:"px-2 py-4 d-flex justify-content-between w-100 text-truncate"},je={class:"mb-0 text-truncate"},We=["onClick"],Je=e("i",{class:"far fa-times-circle text-white"},null,-1),Oe=[Je],Ge=e("small",{class:"text-white"},"將此張圖片設定為封面",-1),He={class:"mb-3"},Ke=e("label",{for:"upload",class:"custom-file-upload"},[e("i",{class:"fas fa-plus-circle text-info d-block"}),h(" 新增圖片 ")],-1),Pe=["id","onUpdate:modelValue","onClick"],qe=["for"],ze=["src","alt"],Ae={class:"px-2 py-4 d-flex justify-content-between w-100 text-truncate"},Qe={class:"mb-0 text-truncate"},Xe=["onClick"],Ye=e("i",{class:"far fa-times-circle text-white"},null,-1),Ze=e("small",{class:"text-white"},"將此張圖片設定為封面",-1),et={class:"mb-3"},tt=e("label",{for:"upload",class:"custom-file-upload"},[e("i",{class:"fas fa-plus-circle text-info d-block"}),h(" 新增圖片 ")],-1),st=R({__name:"TeamUI.client",props:{worksId:{},stageId:{},images:{},editStatus:{type:Boolean}},emits:["getData"],setup(g,{emit:w}){const o=g,p=w,{stageId:_}=T(o),u=$(()=>{let t=0;return _.value!==""&&typeof _.value=="number"&&(t=_.value),V(t)}),m=$(()=>{var t,c;return o.editStatus?(t=o.images.find(s=>s.is_cover))==null?void 0:t.image_url:(c=v.value.find(s=>s.is_cover))==null?void 0:c.image}),i=t=>{v.value.forEach((c,s)=>{s===t?c.is_cover=!0:c.is_cover=!1})},k=async t=>{await x(t),await W(o.worksId,v.value),p("getData",o.worksId)},y=async t=>{await J(o.worksId,t),p("getData",o.worksId)};return(t,c)=>(l(),a(d,null,[e("div",Ue,[t.editStatus?(l(),a("img",{key:1,src:n(m),alt:"設計稿圖片3",class:"img-fluid"},null,8,Te)):(l(),a(d,{key:0},[n(v).length?(l(),a("img",{key:0,src:`data:image/png;base64,${n(m)}`,class:"img-fluid",alt:"設計稿圖片1"},null,8,Se)):(l(),a("img",{key:1,src:n(u).imgUrl,alt:"設計稿圖片2",class:"img-fluid"},null,8,Re))],64))]),e("div",Ve,[Be,Ne,t.editStatus?(l(),a(d,{key:1},[(l(!0),a(d,null,b(t.images,(s,r)=>(l(),a("div",{key:r,class:"form-check mb-3"},[C(e("input",{id:`flexRadioDefault${r}`,"onUpdate:modelValue":f=>s.is_cover=f,class:"form-check-input",type:"radio",name:"flexRadioDefault",value:!0,onClick:f=>n(j)(t.worksId,s.id)},null,8,Pe),[[D,s.is_cover]]),e("label",{class:"form-check-label border border-1 border-white d-flex align-items-center",for:`flexRadioDefault${r}`},[e("img",{src:s.image_url,alt:s.id,class:"img-fluid",width:"118"},null,8,ze),e("div",Ae,[e("p",Qe,I(`設計稿圖片 ${r+1}`),1),e("a",{href:"#",class:"link-muted",onClick:U(f=>y(s.id),["prevent"])},[h(" 刪除 "),Ye],8,Xe)])],8,qe),Ze]))),128)),e("div",et,[tt,e("input",{id:"upload",type:"file",class:"input",onChange:k},null,32)])],64)):(l(),a(d,{key:0},[(l(!0),a(d,null,b(n(v),(s,r)=>(l(),a("div",{key:r,class:"form-check mb-3"},[C(e("input",{id:`flexRadioDefault${r}`,"onUpdate:modelValue":f=>s.is_cover=f,class:"form-check-input",type:"radio",name:"flexRadioDefault",value:!0,onClick:f=>i(r)},null,8,Ee),[[D,s.is_cover]]),e("label",{class:"form-check-label border border-1 border-white d-flex align-items-center",for:`flexRadioDefault${r}`},[e("img",{src:`data:image/png;base64,${s.image}`,alt:s.name,class:"img-fluid",width:"118"},null,8,Le),e("div",Me,[e("p",je,I(s.name),1),e("a",{href:"#",class:"link-muted",onClick:U(f=>n(v).splice(r,1),["prevent"])},Oe,8,We)])],8,Fe),Ge]))),128)),e("div",He,[Ke,e("input",{id:"upload",type:"file",class:"input",onChange:c[0]||(c[0]=(...s)=>n(x)&&n(x)(...s))},null,32)])],64))])],64))}});const lt={key:0},at=["src"],ot=e("p",{class:"mb-1"}," 採用設計稿 ",-1),it=e("small",{class:"text-danger"},"投稿後無法更換採用的設計稿",-1),nt={key:0,class:"text-white"},ct={class:"mb-4"},rt=["src","alt"],dt=e("p",null,[h("設計稿狀態"),e("small",{class:"text-danger"})],-1),ut=e("p",{class:"text-muted"}," 未採用設計稿 ",-1),_t=e("p",null,[e("small",{class:"text-danger"},[e("i",{class:"fas fa-exclamation-triangle"}),h(" 若有採用 UI 介面，請記得點擊採用，您的採用會是 UI 設計師的最大鼓勵！")])],-1),mt=R({__name:"TeamFrontend.client",props:{worksId:{},images:{},stageId:{},editStatus:{type:Boolean}},emits:["getData"],setup(g){const w=g,{stageId:o}=T(w),p=$(()=>{let i=0;return o.value!==""&&typeof o.value=="number"&&(i=o.value),V(i)}),_=N([{id:"99452767839453193",nickname:"斯柏 卡",user_id:"99452767839453193",create_time:"2021-05-24 08:00:00",works_type_name:"前端",tags:[{id:1,name:"JS"}],stage_id:2,online_url:"",file_url:"",ui_layout_online_url:"",upvotes:10,uses:null,is_upvotes:!0,is_use:!0,images:[]}]),u=async()=>{try{const{data:i,error:k}=await O();if(k.value)throw k.value=null,new Error("取得使用者資料失敗。");_.value=i.value.works_list}catch{}},m=$(()=>_.value.filter(i=>i.stage_id===o.value));return E(()=>{u()}),(i,k)=>{const y=M;return l(),a(d,null,[(l(!0),a(d,null,b(n(m),t=>(l(),a("div",{key:t.id,class:"text-white"},[e("div",null,[(l(!0),a(d,null,b(t.images,c=>(l(),a("div",{key:c.id,class:"mb-4"},[c.is_cover?(l(),a("div",lt,[e("img",{src:c.image_url,alt:"",class:"img-fluid"},null,8,at)])):S("",!0)]))),128)),ot,e("p",null,[h(" 已採用 "),F(y,{to:`/users/${t.user_id}`,target:"_blank",class:"link-dark"},{default:L(()=>[h(I(t.nickname)+" 的設計稿 ",1)]),_:2},1032,["to"])]),it])]))),128)),n(m).length?S("",!0):(l(),a("div",nt,[e("div",ct,[e("img",{src:n(p).imgUrl,alt:n(p).name,class:"img-fluid"},null,8,rt)]),dt,ut,_t]))],64)}}}),vt=g=>{switch(g){case 1:return B;case 2:return De;case 3:return st;case 4:return mt;default:return B}},kt=({roleId:g,stages:w,stageSchedule:o})=>{const p=JSON.parse(JSON.stringify(w)),_=Math.floor(Date.now()/1e3);return p.forEach(u=>{u.works_types_id=g;const m=o.find(i=>i.id===u.id&&g===i.works_types_id);if(m){u.startTime=new Date(m.start_time).getTime()/1e3,u.endTime=new Date(m.end_time).getTime()/1e3,u.nowTime=_;let i=u.nowTime<=u.startTime;u.status=i}}),p};export{kt as p,vt as t};

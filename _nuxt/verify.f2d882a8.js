import{_ as q}from"./Alert.8d2ed0f2.js";import{_ as B}from"./client-only.77fcb457.js";import{e as E,G as F,B as M,r as i,a as N,C as f,g as r,i as u,j as e,k as n,u as o,l as v,J as R,q as O}from"./entry.950a9e27.js";import{l as y}from"./loading.acca26de.js";import{h as J,i as P}from"./users.810791e2.js";import"./useCustomFetch.e7fcaaf5.js";import"./fetch.6d0ababc.js";import"./cookie.68603f12.js";const j={class:"main-bg text-white"},z={class:"container py-12"},A={class:"row"},D={class:"col-md-8",style:{height:"calc(78vh)"}},G={class:"filter-blur p-7"},I={key:0,class:"fs-2 mb-5"},U={key:1,class:"fs-2 mb-5"},H={key:2},K=e("h1",{class:"fs-2 mb-5"}," Oops！驗證沒有成功嗎？ ",-1),L={class:"mb-4"},Q=e("label",{for:"account",class:"form-label"},"請輸入您報名時的 Email，我們將會為您寄送重新驗證信件",-1),T=["disabled"],ne=E({__name:"verify",setup(W){const p=F(),h=M(),a=i({}),c=i(""),d=i(!1),m=i(!0),b=y(async()=>{const s=p.query.verify_code,t=p.query.account;if(t&&s){const _={account:t,verify_code:Number(s)},{error:l}=await J(_);l.value?(l.value=null,m.value=!1,d.value=!1,a.value={style:"danger",icon:"error",content:"驗證失敗！"}):(m.value=!1,window.sessionStorage.setItem("signupStatus",JSON.stringify(!0)),h.push("/login"))}});N(b);const g=y(async()=>{const{error:s}=await P(c.value);a.value={style:"success",icon:"check_circle",content:"發送成功！"},s.value&&(s.value=null,a.value={style:"danger",icon:"error",content:"發送失敗！"})});return(s,t)=>{const _=q,l=f("VField"),V=f("VErrorMessage"),k=f("VForm"),w=B;return r(),u("div",j,[e("div",z,[n(_,{message:o(a)},null,8,["message"]),e("div",A,[e("div",D,[e("div",G,[o(d)&&o(m)?(r(),u("div",I," 驗證中 ... ")):o(d)?(r(),u("div",U," 驗證成功 :D ")):(r(),u("div",H,[K,n(w,null,{default:v(()=>[n(k,{onSubmit:o(g)},{default:v(({meta:x,errors:C})=>[e("div",L,[Q,n(l,{id:"account",modelValue:o(c),"onUpdate:modelValue":t[0]||(t[0]=S=>R(c)?c.value=S:null),modelModifiers:{trim:!0},name:"account",label:"帳號",type:"email",class:O(["form-control",{"is-invalid":C.account}]),placeholder:"name@example.com",rules:"required|email"},null,8,["modelValue","class"]),n(V,{name:"account",class:"invalid-feedback"})]),e("button",{type:"submit",class:"btn btn-info rounded-0 text-white",disabled:!x.valid}," 重發驗證信 ",8,T)]),_:1},8,["onSubmit"])]),_:1})]))])])])])])}}});export{ne as default};

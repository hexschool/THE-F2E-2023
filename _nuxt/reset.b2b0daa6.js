import{_ as y}from"./Alert.8d2ed0f2.js";import{_ as k}from"./client-only.77fcb457.js";import{e as x,G as C,B as E,r as f,C as _,g as M,i as N,j as s,k as t,u as r,l as w,q as v,H as q,v as B}from"./entry.950a9e27.js";import{u as F}from"./cookie.68603f12.js";import{c as R}from"./users.810791e2.js";import"./useCustomFetch.e7fcaaf5.js";import"./fetch.6d0ababc.js";const I={class:"main-bg text-white",style:{height:"calc(78vh)"}},J={class:"container py-12"},O={class:"row"},P={class:"col-md-10 col-lg-8"},S={class:"row"},U={class:"col-md-10 col-lg-8"},j={class:"filter-blur p-7 mb-4"},z=s("h1",{class:"fs-2 mb-5"}," 重設密碼 ",-1),A={class:"mb-4"},G=s("label",{for:"password",class:"form-label"},"新密碼＊",-1),H={class:"mb-4"},T=s("label",{for:"confirm_password",class:"form-label"},"確認密碼＊",-1),X={class:"d-flex flex-column align-items-end"},D=["disabled","onClick"],K=s("span",{class:"fill material-symbols-outlined align-middle fs-2 me-2"}," expand_circle_right ",-1),os=x({__name:"reset",setup(L){const p=C(),h=E(),c=f({content:"",style:"",icon:""}),a=f({account:"",password:"",confirm_password:""}),b=async()=>{var o,n;const i=p.query.token;if(a.value.account=p.query.email,i)try{const e=await R(i,a.value);if(e.status.value==="error"){const d=JSON.parse(JSON.stringify((n=(o=e.error.value)==null?void 0:o.data)==null?void 0:n.message));throw e.error.value=null,new Error(d)}const l=F("t_sInR5cCI6IkpXVCJ_token");l.value=null,c.value={style:"success",icon:"check_circle",content:"更新成功！"},h.push("/login")}catch(e){c.value={style:"danger",icon:"error",content:e||"更新失敗！"}}};return(i,o)=>{const n=y,e=_("VField"),l=_("VErrorMessage"),d=_("VForm"),g=k;return M(),N("div",I,[s("div",J,[s("div",O,[s("div",P,[t(n,{message:r(c)},null,8,["message"])])]),s("div",S,[s("div",U,[t(g,null,{default:w(()=>[t(d,null,{default:w(({errors:u,meta:V})=>[s("div",j,[z,s("div",A,[G,t(e,{id:"password",modelValue:r(a).password,"onUpdate:modelValue":o[0]||(o[0]=m=>r(a).password=m),modelModifiers:{trim:!0},name:"password",label:"密碼",type:"password",class:v(["form-control",{"is-invalid":u.password}]),rules:"password"},null,8,["modelValue","class"]),t(l,{name:"password",class:"invalid-feedback"})]),s("div",H,[T,t(e,{id:"confirm_password",modelValue:r(a).confirm_password,"onUpdate:modelValue":o[1]||(o[1]=m=>r(a).confirm_password=m),modelModifiers:{trim:!0},name:"confirm_password",label:"確認密碼",type:"password",class:v(["form-control",{"is-invalid":u.confirm_password}]),rules:"required|confirmed:@password"},null,8,["modelValue","class"]),t(l,{name:"confirm_password",class:"invalid-feedback"})])]),s("div",X,[s("button",{type:"button",class:"btn fs-4 border-0 p-0 text-white d-flex align-items-center",disabled:!V.valid,onClick:q(b,["prevent"])},[K,B(" 確認送出 ")],8,D)])]),_:1})]),_:1})])])])])}}});export{os as default};

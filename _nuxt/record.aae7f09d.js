import{_ as D}from"./SideBar.85ea5694.js";import{e as T,r as B,B as j,f as L,g as r,i as a,j as o,k as A,u as e,s as _,F,m as G,v as f,t as l,H as N,D as R,E as q,A as H}from"./entry.950a9e27.js";import{k as J,q as M}from"./users.810791e2.js";import"./useUploadImg.7d2a983e.js";import"./fetch.6d0ababc.js";import"./works.8b9c14c6.js";import"./useCustomFetch.e7fcaaf5.js";import"./cookie.68603f12.js";import"./loading.acca26de.js";import"./team.297d1263.js";const i=p=>(R("data-v-59cd90a5"),p=p(),q(),p),O={class:"main-bg record"},z={class:"container py-5"},K={class:"row justify-content-center mt-md-7"},P={class:"col-md-8"},Q={class:"bg-white-40 p-7 rounded-4 text-white"},X={class:"mb-2"},Y=i(()=>o("h2",{class:"fs-3 mb-4"}," 投稿紀錄 ",-1)),Z={key:0,class:"record-table table-responsive"},tt={class:"table"},ot=i(()=>o("th",{scope:"col"}," 關卡名稱 ",-1)),et=i(()=>o("th",{scope:"col"}," 作品網址 ",-1)),st=i(()=>o("th",{scope:"col"}," 挑戰時間 ",-1)),nt=i(()=>o("th",{scope:"col"}," 挑戰結果 ",-1)),rt={key:0,scope:"col"},at={scope:"row",width:"180"},ct={key:0,class:"badge rounded-pill bg-primary"},it=i(()=>o("small",null,"前端",-1)),_t=[it],dt={key:1,class:"badge rounded-pill bg-primary"},lt=i(()=>o("small",null,"UI",-1)),pt=[lt],ut={scope:"row",width:"100"},ht=["href"],wt={scope:"row",width:"120"},kt=i(()=>o("br",null,null,-1)),ft={scope:"row",width:"100"},vt={key:0,scope:"row",class:"text-info",width:"50"},mt=["onClick"],yt=["onClick"],gt={key:1},bt=T({__name:"record",async setup(p){let u,h;const s=B({avatar:null,description:null,email:"",facebook_url:null,medal_image_url:null,medal_name:null,nickname:"",user_id:""}),w=B([]),v=async()=>{try{const{data:n,error:c}=await J();if(c.value)throw c.value=null,new Error("取得使用者資料失敗。");s.value=n.value.user_info}catch{}},U=async()=>{try{const{data:n,error:c}=await M();if(c.value)throw c.value=null,new Error("取得投稿資料失敗。");w.value=n.value.works_list}catch(n){console.log(n)}},m=j(),V=n=>{m.push(`/works/edit/${n}`)},W=(n,c,k)=>{window.localStorage.setItem("team",JSON.stringify({id:c,name:k})),m.push(`/works/team/edit/${n}`)};return[u,h]=L(()=>v()),await u,h(),[u,h]=L(()=>U()),await u,h(),(n,c)=>{var y,g,b;const k=D;return r(),a("div",O,[o("div",z,[o("div",K,[A(k,{info:e(s),onEdit:v},null,8,["info"]),o("div",P,[o("div",Q,[o("div",X,[Y,e(w).length?(r(),a("div",Z,[o("table",tt,[o("thead",null,[o("tr",null,[ot,et,st,nt,(y=e(s))!=null&&y.individual_competition||(b=(g=e(s))==null?void 0:g.team_competition)!=null&&b.is_leader?(r(),a("th",rt," 編輯 ")):_("",!0)])]),o("tbody",null,[(r(!0),a(F,null,G(e(w),t=>{var S,x,I,C;return r(),a("tr",{key:t.id},[o("td",at,[f(" Week"+l(t.stage_id)+"-"+l(t.stage_name)+" ",1),(S=e(s))!=null&&S.team_competition&&(t==null?void 0:t.works_type_id.toString())==="4"?(r(),a("span",ct,_t)):_("",!0),(x=e(s))!=null&&x.team_competition&&(t==null?void 0:t.works_type_id.toString())==="3"?(r(),a("span",dt,pt)):_("",!0)]),o("td",ut,[o("a",{class:"link-info",href:t.online_url,target:"_blank"},"作品連結",8,ht)]),o("td",wt,[f(l(t.create_time.split("T")[0])+" ",1),kt,f(" "+l(new Date(t.create_time).toLocaleTimeString("sv-SE")),1)]),o("td",ft,l(t.is_clear?"成功":"超過提交期限"),1),e(s).individual_competition||(C=(I=e(s))==null?void 0:I.team_competition)!=null&&C.is_leader?(r(),a("td",vt,[e(s).team_competition&&e(s).team_competition.is_leader?(r(),a("a",{key:0,href:"#",class:"btn btn-sm btn-info text-white rounded-0",onClick:N($=>{var d,E;return W((d=t==null?void 0:t.id)==null?void 0:d.toString(),(E=t==null?void 0:t.works_type_id)==null?void 0:E.toString(),t==null?void 0:t.works_type_name)},["prevent"])}," 編輯 ",8,mt)):_("",!0),e(s).individual_competition?(r(),a("a",{key:1,href:"#",class:"btn btn-sm btn-info text-white rounded-0",onClick:N($=>{var d;return V((d=t==null?void 0:t.id)==null?void 0:d.toString())},["prevent"])}," 編輯 ",8,yt)):_("",!0)])):_("",!0)])}),128))])])])):(r(),a("p",gt,"您還沒有關卡資料哦！"))])])])])])])}}});const Wt=H(bt,[["__scopeId","data-v-59cd90a5"]]);export{Wt as default};

import{_ as X}from"./Alert.8d2ed0f2.js";import{e as Y,B as Z,I as R,r as m,a as ee,C as J,g as u,i as _,j as e,k as o,u as s,l as O,q as r,J as d,t as N,K as k,L as y,F as B,m as T,M as le,v as g,_ as ae}from"./entry.950a9e27.js";import{_ as se}from"./client-only.77fcb457.js";import{l as I}from"./loading.acca26de.js";import{d as oe,e as ie,f as ne,g as te}from"./users.810791e2.js";import"./useCustomFetch.e7fcaaf5.js";import"./fetch.6d0ababc.js";import"./cookie.68603f12.js";const me={class:"main-bg text-white"},de={class:"container py-12"},ce=e("ol",{class:"list-unstyled d-flex mb-5"},[e("li",{class:"fs-5 text-warning-border"}," 填寫報名資訊 "),e("li",{class:"fs-5",style:{color:"#E2DBC3"}},[e("span",{class:"material-symbols-outlined px-3 align-middle"},"expand_circle_right"),g(" 註冊驗證 ")])],-1),re={class:"row"},ue={class:"col-md-8"},_e={class:"filter-blur p-7"},pe=e("h1",{class:"fs-2 fw-900 mb-5"}," 填寫報名資訊 ",-1),fe={class:"mb-4"},ve=e("label",{for:"account",class:"form-label"},"帳號（Email）*",-1),be={class:"mb-4"},he=e("label",{for:"password",class:"form-label"},"密碼*",-1),ke={class:"mb-4"},ye=e("label",{for:"confirm_password",class:"form-label"},"確認密碼*",-1),ge={class:"mb-4"},Ve=e("label",{for:"name",class:"form-label"},"暱稱*",-1),we={class:"invalid-feedback"},xe={class:"mb-4"},Ue=e("p",null,[g(" 選擇組別*"),e("small",{class:"text-warning ps-2"},"選擇後不可改變")],-1),Ce={class:"form-check"},Me=e("label",{class:"form-check-label",for:"individual"}," 個人組 ",-1),Ee={class:"form-check"},Ne=e("label",{class:"form-check-label",for:"team"}," 團體組 ",-1),Be={class:"form-check mt-3"},Ie=e("label",{class:"form-check-label small",for:"teamCheck"}," 我已確定選擇該組別後不可改變* ",-1),qe={key:0,class:"mb-4"},Se=e("p",null,"選擇個人組別*",-1),De=["id","value"],Fe=["for"],Je={class:"mb-4"},Oe=e("p",null,[g(" 選擇團體身份* "),e("small",{class:"text-warning ps-2"},"建議組合為一個 UI 設計師一個前端工程師")],-1),Le=["id","value"],Pe=["for"],Re={class:"mb-4"},Te=e("p",null,"選擇團體角色*",-1),je={class:"form-check"},ze=e("label",{class:"form-check-label",for:"team_leader"},"我要當組長",-1),Ae={class:"form-check"},Ge=e("label",{class:"form-check-label",for:"team_member"},"我要當組員",-1),Ke={class:"mb-4"},$e=e("label",{for:"team_name",class:"form-label"},[g("團隊名稱*"),e("small",{class:"text-warning"},"團隊名稱不能修改")],-1),He={class:"invalid-feedback"},Qe={class:"mb-4"},We=e("label",{for:"member_mail_1",class:"form-label"},"組員一信箱*",-1),Xe={class:"mb-4"},Ye=e("label",{for:"member_mail_2",class:"form-label"},"組員二信箱",-1),Ze={class:"mb-4"},el=e("label",{for:"member_mail_3",class:"form-label"},"組員三信箱",-1),ll={key:1,class:"mb-4"},al=e("label",{for:"leader_mail",class:"form-label"},"組長信箱*",-1),sl={class:"mb-2"},ol=e("p",{class:"mb-0 small"}," 本活動報名所使用個人資料，將作為六角學院及贊助廠商交流作業蒐集、處理及利用之權利，不會作為廣告行銷之用途。 ",-1),il={class:"form-check"},nl=e("label",{class:"form-check-label small",for:"agree"}," 我同意* ",-1),tl={class:"text-end"},ml=["disabled"],dl=e("span",{class:"fill material-symbols-outlined align-middle fs-2"}," expand_circle_right ",-1),cl={class:"d-flex justify-content-end"},rl=e("p",{class:"mb-0"}," 已報名？ ",-1),gl=Y({__name:"index",setup(ul){const j=Z(),n=R({account:"",password:"",nickname:"",agree_user_policy:0,competition:{}}),q=m(""),p=m("individual"),C=m(1),V=m(1),w=m(""),f=m(!0),M=m(""),x=m(""),U=m(""),E=m(""),v=R({nickname:"",teamname:""}),S=m({}),D=m(!1),L=m([{id:1,name:"UI設計師"}]),P=m([{id:1,name:"UI設計師"}]),z=I(async()=>{const{data:t,error:l}=await oe();if(l.value)throw l.value=null,new Error("取得資訊失敗。");L.value=t.value.individual_competitions,P.value=t.value.team_competition_positions});ee(z);const A=I(async()=>{var l,b;const{error:t}=await ie(n.nickname);if(t.value){const i=JSON.parse(JSON.stringify((b=(l=t.value)==null?void 0:l.data)==null?void 0:b.message));v.nickname=i,t.value=null}else v.nickname=""}),G=I(async()=>{var l;const{error:t}=await ne(w.value);t.value?([v.teamname]=(l=t.value)==null?void 0:l.data.message,t.value=null):v.teamname=""}),K=I(async()=>{var l,b;if(p.value==="individual")n.competition={individual:{group_id:C.value}};else if(f.value){const i=[M.value];x.value&&i.push(x.value),U.value&&i.push(U.value),n.competition={team:{position_id:V.value,name:w.value,member_emails:i}}}else n.competition={team:{position_id:V.value,leader_email:E.value}};n.agree_user_policy=n.agree_user_policy?1:0;const{error:t}=await te(n);if(t.value){const i=JSON.parse(JSON.stringify((b=(l=t.value)==null?void 0:l.data)==null?void 0:b.message));t.value=null,S.value={style:"danger",icon:"error",content:i||"報名失敗！"}}else j.push("signup/message"),S.value={style:"success",icon:"check_circle",content:"報名成功！"}});return(t,l)=>{const b=X,i=J("VField"),h=J("VErrorMessage"),$=ae,H=J("VForm"),Q=se;return u(),_("div",me,[e("div",de,[o(b,{message:s(S)},null,8,["message"]),ce,e("div",re,[e("div",ue,[e("div",_e,[o(Q,null,{default:O(()=>[o(H,{onSubmit:s(K)},{default:O(({meta:W,errors:c})=>[e("div",null,[pe,e("div",fe,[ve,o(i,{id:"account",modelValue:s(n).account,"onUpdate:modelValue":l[0]||(l[0]=a=>s(n).account=a),modelModifiers:{trim:!0},name:"account",label:"帳號",type:"email",class:r(["form-control",{"is-invalid":c.account}]),placeholder:"example@example.com",rules:"required|email"},null,8,["modelValue","class"]),o(h,{name:"account",class:"invalid-feedback"})]),e("div",be,[he,o(i,{id:"password",modelValue:s(n).password,"onUpdate:modelValue":l[1]||(l[1]=a=>s(n).password=a),modelModifiers:{trim:!0},name:"password",label:"password",type:"password",class:r(["form-control",{"is-invalid":c.password}]),rules:"password",placeholder:"請輸入密碼"},null,8,["modelValue","class"]),o(h,{name:"password",class:"invalid-feedback"})]),e("div",ke,[ye,o(i,{id:"confirm_password",modelValue:s(q),"onUpdate:modelValue":l[2]||(l[2]=a=>d(q)?q.value=a:null),modelModifiers:{trim:!0},name:"confirm_password",label:"確認密碼",type:"password",class:r(["form-control",{"is-invalid":c.confirm_password}]),rules:"required|confirmed:@password",placeholder:"請再次輸入密碼"},null,8,["modelValue","class"]),o(h,{name:"confirm_password",class:"invalid-feedback"})]),e("div",ge,[Ve,o(i,{id:"name",modelValue:s(n).nickname,"onUpdate:modelValue":l[3]||(l[3]=a=>s(n).nickname=a),modelModifiers:{trim:!0},name:"name",label:"暱稱",type:"text",class:r(["form-control",{"is-invalid":c.name||s(v).nickname}]),rules:"required",placeholder:"請輸入暱稱",onBlur:s(A)},null,8,["modelValue","class","onBlur"]),e("span",we,N(c.name||s(v).nickname),1)]),e("div",xe,[Ue,e("div",Ce,[k(e("input",{id:"individual","onUpdate:modelValue":l[4]||(l[4]=a=>d(p)?p.value=a:null),value:"individual",class:"form-check-input",type:"radio",name:"group"},null,512),[[y,s(p)]]),Me]),e("div",Ee,[k(e("input",{id:"team","onUpdate:modelValue":l[5]||(l[5]=a=>d(p)?p.value=a:null),value:"team",class:"form-check-input",type:"radio",name:"group"},null,512),[[y,s(p)]]),Ne]),e("div",Be,[o(i,{id:"teamCheck",modelValue:s(D),"onUpdate:modelValue":l[6]||(l[6]=a=>d(D)?D.value=a:null),type:"checkbox",value:!0,name:"teamCheck",label:"確認不可改變",class:r(["form-check-input",{"is-invalid":c.teamCheck}]),rules:"required"},null,8,["modelValue","class"]),Ie])]),s(p)==="individual"?(u(),_("div",qe,[Se,(u(!0),_(B,null,T(s(L),a=>(u(),_("div",{key:a.id,class:"form-check"},[k(e("input",{id:a.name==="UI設計師"?"individual_ui":"individual_frontend","onUpdate:modelValue":l[7]||(l[7]=F=>d(C)?C.value=F:null),value:a.id,class:"form-check-input",type:"radio",name:"individual"},null,8,De),[[y,s(C),void 0,{number:!0}]]),e("label",{class:"form-check-label",for:a.name==="UI設計師"?"individual_ui":"individual_frontend"},N(a.name),9,Fe)]))),128))])):(u(),_(B,{key:1},[e("div",Je,[Oe,(u(!0),_(B,null,T(s(P),a=>(u(),_("div",{key:a.id,class:"form-check"},[k(e("input",{id:a.name,"onUpdate:modelValue":l[8]||(l[8]=F=>d(V)?V.value=F:null),value:a.id,class:"form-check-input",type:"radio",name:"team"},null,8,Le),[[y,s(V),void 0,{number:!0}]]),e("label",{class:"form-check-label",for:a.name},N(a.name),9,Pe)]))),128))]),e("div",Re,[Te,e("div",je,[k(e("input",{id:"team_leader","onUpdate:modelValue":l[9]||(l[9]=a=>d(f)?f.value=a:null),value:!0,class:"form-check-input",type:"radio",name:"team_identity"},null,512),[[y,s(f)]]),ze]),e("div",Ae,[k(e("input",{id:"team_member","onUpdate:modelValue":l[10]||(l[10]=a=>d(f)?f.value=a:null),value:!1,class:"form-check-input",type:"radio",name:"team_identity"},null,512),[[y,s(f)]]),Ge])]),s(f)?(u(),_(B,{key:0},[e("div",Ke,[$e,o(i,{id:"team_name",modelValue:s(w),"onUpdate:modelValue":l[11]||(l[11]=a=>d(w)?w.value=a:null),modelModifiers:{trim:!0},name:"team_name",label:"團隊名稱",type:"text",class:r(["form-control",{"is-invalid":c.team_name||s(v).teamname}]),rules:"required|max:10",placeholder:"請輸入團隊名稱",onBlur:s(G)},null,8,["modelValue","class","onBlur"]),e("span",He,N(c.team_name||s(v).teamname),1)]),e("div",Qe,[We,o(i,{id:"member_mail_1",modelValue:s(M),"onUpdate:modelValue":l[12]||(l[12]=a=>d(M)?M.value=a:null),modelModifiers:{trim:!0},name:"member_mail_1",label:"組員一信箱",type:"email",class:r(["form-control",{"is-invalid":c.member_mail_1}]),placeholder:"name@example.com",rules:"required|email"},null,8,["modelValue","class"]),o(h,{name:"member_mail_1",class:"invalid-feedback"})]),e("div",Xe,[Ye,o(i,{id:"member_mail_2",modelValue:s(x),"onUpdate:modelValue":l[13]||(l[13]=a=>d(x)?x.value=a:null),modelModifiers:{trim:!0},name:"member_mail_2",label:"組員二信箱",type:"email",class:r(["form-control",{"is-invalid":c.member_mail_2}]),placeholder:"name@example.com",rules:"email"},null,8,["modelValue","class"]),o(h,{name:"member_mail_2",class:"invalid-feedback"})]),e("div",Ze,[el,o(i,{id:"member_mail_3",modelValue:s(U),"onUpdate:modelValue":l[14]||(l[14]=a=>d(U)?U.value=a:null),modelModifiers:{trim:!0},name:"member_mail_3",label:"組員三信箱",type:"email",class:r(["form-control",{"is-invalid":c.member_mail_3}]),placeholder:"name@example.com",rules:"email"},null,8,["modelValue","class"]),o(h,{name:"member_mail_3",class:"invalid-feedback"})])],64)):(u(),_("div",ll,[al,o(i,{id:"leader_mail",modelValue:s(E),"onUpdate:modelValue":l[15]||(l[15]=a=>d(E)?E.value=a:null),modelModifiers:{trim:!0},name:"leader_mail",label:"組長信箱",type:"email",class:r(["form-control",{"is-invalid":c.leader_mail}]),placeholder:"name@example.com",rules:"required|email"},null,8,["modelValue","class"]),o(h,{name:"leader_mail",class:"invalid-feedback"})]))],64)),e("div",sl,[ol,e("div",il,[k(e("input",{id:"agree","onUpdate:modelValue":l[16]||(l[16]=a=>s(n).agree_user_policy=a),class:"form-check-input",type:"checkbox"},null,512),[[le,s(n).agree_user_policy]]),nl])]),e("div",tl,[e("button",{type:"submit",class:"btn text-white border-0 p-0 fs-4 fw-bold",disabled:!W.valid||!s(n).agree_user_policy},[dl,g(" 立即報名 ")],8,ml),e("div",cl,[rl,o($,{to:"/login",class:"link-warning"},{default:O(()=>[g(" 前往登入 ")]),_:1})])])])]),_:1},8,["onSubmit"])]),_:1})])])])])])}}});export{gl as default};

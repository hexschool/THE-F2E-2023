import{_ as A}from"./week3.70dc6bd0.js";import{_ as P}from"./SideBar.85ea5694.js";import{_ as B}from"./Card.2e12866b.js";import{u as j}from"./cookie.68603f12.js";import{k as G,l as L,m as M}from"./users.810791e2.js";import{b as D,c as F,d as T,e as H}from"./works.8b9c14c6.js";import{l as m}from"./loading.acca26de.js";import{e as R,r as _,a as X,f as Y,C as $,g as p,i as f,j as l,k as y,u as e,F as U,x as E,s as V}from"./entry.950a9e27.js";import"./useUploadImg.7d2a983e.js";import"./fetch.6d0ababc.js";import"./team.297d1263.js";import"./useCustomFetch.e7fcaaf5.js";const q={class:"main-bg"},z={class:"container py-5"},K={class:"row justify-content-center mt-md-7"},Q={class:"col-md-8"},Z={class:"bg-white-40 p-7 rounded-4 text-white"},ee=l("h2",{class:"fs-2 fw-900 mb-5"}," 採用的投稿 ",-1),te={class:"row"},se=l("h2",{class:"fs-2 fw-900 mb-5"}," 誰採用我的投稿 ",-1),oe={class:"d-flex justify-content-center"},ae={key:1},we=R({__name:"collection",async setup(ne){let S,I;const g=_({avatar:null,description:null,email:"",facebook_url:null,medal_image_url:null,medal_name:null,nickname:"",user_id:""}),C=_({content:"",style:"",icon:""}),W=m(async()=>{try{const{data:t,error:s}=await G();if(s.value)throw s.value=null,new Error("取得使用者資料失敗。");g.value=t.value.user_info,await k()}catch{}}),J=t=>{C.value=t},c=_([]),d=_({total_works:0,count:0,total_page:0,current_page:0}),k=m(async()=>{var t;((t=g.value.individual_competition)==null?void 0:t.name)==="個人組/前端工程師"?await O():await b()}),O=m(async()=>{try{const{data:t,error:s}=await L();if(s.value)throw s.value=null,new Error("取得使用者資料失敗。");c.value=t.value.works_list}catch{}}),b=m(async t=>{try{const{data:s,error:a}=await M(t);if(a.value)throw a.value=null,new Error("取得誰採用我的設計稿失敗。");c.value=s.value.works_list,d.value=s.value.pagination}catch{}}),N=m(async(t,s)=>{var i,u,r,v;let a=!1,n="更新作品按讚失敗。";if(s){const{error:o}=await D(t);o.value&&(n=JSON.parse(JSON.stringify((u=(i=o.value)==null?void 0:i.data)==null?void 0:u.message)),o.value=null,a=!0)}else{const{error:o}=await F(t);o.value&&(n=JSON.parse(JSON.stringify((v=(r=o.value)==null?void 0:r.data)==null?void 0:v.message)),o.value=null,a=!0)}if(a)throw new Error(n);await k()}),x=m(async(t,s)=>{var i,u,r,v;let a=!1,n="更新作品按讚失敗。";if(s){const{error:o}=await T(t);o.value&&(n=JSON.parse(JSON.stringify((u=(i=o.value)==null?void 0:i.data)==null?void 0:u.message)),o.value=null,a=!0)}else{const{error:o}=await H(t);o.value&&(n=JSON.parse(JSON.stringify((v=(r=o.value)==null?void 0:r.data)==null?void 0:v.message)),o.value=null,a=!0)}if(a)throw new Error(n);await k()}),w=_(!1);X(()=>{j("t_sInR5cCI6IkpXVCJ_token").value&&(w.value=!0)});const h=_(1);return(()=>{sessionStorage.getItem("HbPeShUserVmYTyPe")==="個人組/前端工程師"&&(h.value=2)})(),[S,I]=Y(()=>W()),await S,I(),(t,s)=>{const a=A,n=P,i=B,u=$("VueAwesomePaginate");return p(),f("div",q,[l("div",z,[y(a),l("div",K,[y(n,{info:e(g),onEdit:e(W),onAlert:J},null,8,["info","onEdit"]),l("div",Q,[l("div",Z,[e(c).length?(p(),f(U,{key:0},[e(g).individual_competition.name==="個人組/前端工程師"?(p(),f(U,{key:0},[ee,l("div",te,[e(c).length?(p(),E(i,{key:0,"user-type":e(h),"works-list":e(c),"col-num":6,"auth-status":e(w),onIsUpvotes:e(N),onIsUse:e(x)},null,8,["user-type","works-list","auth-status","onIsUpvotes","onIsUse"])):V("",!0)])],64)):(p(),f(U,{key:1},[se,e(c).length?(p(),E(i,{key:0,"user-type":e(h),"works-list":e(c),"col-num":6,"auth-status":e(w),onIsUpvotes:e(N),onIsUse:e(x)},null,8,["user-type","works-list","auth-status","onIsUpvotes","onIsUse"])):V("",!0),l("div",oe,[y(u,{modelValue:e(d).total_page,"onUpdate:modelValue":s[0]||(s[0]=r=>e(d).total_page=r),"total-items":e(d).total_works,"items-per-page":e(d).count,"on-click":r=>e(b)(r),"pagination-container-class":"pagination","prev-button-content":"«","next-button-content":"»","paginate-buttons-class":"page-link","active-page-class":"active"},null,8,["modelValue","total-items","items-per-page","on-click"])])],64))],64)):(p(),f("p",ae,"目前沒有投稿"))])])])])])}}});export{we as default};

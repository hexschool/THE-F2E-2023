import{_ as C}from"./Alert.8d2ed0f2.js";import{e as S,B as I,r as g,a as N,C as _,g as E,i as J,j as s,k as e,u as n,l as m,q as h,v as p,_ as M}from"./entry.950a9e27.js";import{_ as B}from"./client-only.77fcb457.js";import{u as b}from"./cookie.68603f12.js";import{l as F}from"./loading.acca26de.js";import{a as O}from"./users.810791e2.js";import"./useCustomFetch.e7fcaaf5.js";import"./fetch.6d0ababc.js";const R={class:"main-bg text-white",style:{height:"calc(78vh)"}},q={class:"container py-12"},z={class:"row"},A={class:"col-md-8"},L={class:"row"},U={class:"col-md-8"},X={class:"filter-blur px-7 pt-7 pb-9 mb-4"},j=s("h1",{class:"fs-2 mb-5"}," 登入 ",-1),P={class:"mb-4"},T=s("label",{for:"account",class:"form-label mb-1"},"帳號（Email）＊",-1),$={class:"mb-1"},D=s("label",{for:"password",class:"form-label mb-1"},"密碼＊",-1),G={class:"d-flex flex-column align-items-end"},H=["disabled"],K=s("span",{class:"fill material-symbols-outlined align-middle fs-2 me-2"}," expand_circle_right ",-1),as=S({__name:"index",setup(Q){const f=I(),w=b("t_sInR5cCI6IkpXVCJ_token",{maxAge:60*60*24*60}),c=g({content:"",style:"",icon:""}),a=g({account:"",password:""}),x=F(async()=>{var i,o;try{const{data:l,error:t}=await O(a.value);if(t.value){const d=JSON.parse(JSON.stringify((o=(i=t.value)==null?void 0:i.data)==null?void 0:o.message));throw t.value=null,new Error(d)}const r=l.value.access_token;w.value=r,f.push("/users"),c.value={style:"success",icon:"check_circle",content:"登入成功！"}}catch(l){c.value={style:"danger",icon:"error",content:l||"登入失敗！"}}});return N(()=>{b("t_sInR5cCI6IkpXVCJ_token").value&&f.push("/users"),JSON.parse(window.sessionStorage.getItem("signupStatus"))&&(c.value={style:"success",icon:"check_circle",content:"帳號驗證成功！"},window.sessionStorage.removeItem("signupStatus"))}),(i,o)=>{const l=C,t=_("VField"),r=_("VErrorMessage"),d=M,k=_("VForm"),y=B;return E(),J("div",R,[s("div",q,[s("div",z,[s("div",A,[e(l,{message:n(c)},null,8,["message"])])]),s("div",L,[s("div",U,[e(y,null,{default:m(()=>[e(k,{onSubmit:n(x)},{default:m(({errors:v,meta:V})=>[s("div",X,[j,s("div",P,[T,e(t,{id:"account",modelValue:n(a).account,"onUpdate:modelValue":o[0]||(o[0]=u=>n(a).account=u),modelModifiers:{trim:!0},name:"account",label:"帳號",type:"email",class:h(["form-control rounded-0 mb-1",{"is-invalid":v.account}]),placeholder:"name@example.com",rules:"required|email"},null,8,["modelValue","class"]),e(r,{name:"account",class:"invalid-feedback"})]),s("div",$,[D,e(t,{id:"password",modelValue:n(a).password,"onUpdate:modelValue":o[1]||(o[1]=u=>n(a).password=u),modelModifiers:{trim:!0},name:"password",label:"密碼",type:"password",class:h(["form-control rounded-0 mb-1",{"is-invalid":v.password}]),placeholder:"請輸入密碼",rules:"password"},null,8,["modelValue","class"]),e(r,{name:"password",class:"invalid-feedback"})]),e(d,{to:"/password",class:"link-primary text-decoration-none",style:{"font-size":"14px"}},{default:m(()=>[p(" 忘記密碼？ ")]),_:1})]),s("div",G,[s("button",{type:"submit",class:"btn fs-4 border-0 p-0 text-white d-flex align-items-center",disabled:!V.valid},[K,p(" 立即登入 ")],8,H),e(d,{to:"/signup/verify",class:"link-light text-decoration-none"},{default:m(()=>[p(" 重發驗證信 ")]),_:1})])]),_:1},8,["onSubmit"])]),_:1})])])])])}}});export{as as default};
